<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Liên hệ - CandyShop</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
<div id="toast-container" class="toast-container"></div>

<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/"><img src="/images/logo.jpg" alt="CandyShop Logo" style="height: 70px;"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Trang chủ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/cart.html">Giỏ hàng</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/orders.html">Đơn hàng của tôi</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/contact.html">Liên hệ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/login" id="login-link">Đăng nhập</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="logout-btn" style="display: none;">Đăng xuất</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-5">
  <h2 class="mb-4 text-center">Liên hệ với chúng tôi</h2>
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <p class="text-center mb-4">Chúng tôi luôn sẵn lòng lắng nghe ý kiến và giải đáp mọi thắc mắc của bạn. Vui lòng điền vào biểu mẫu dưới đây hoặc liên hệ trực tiếp với chúng tôi qua các thông tin sau:</p>

      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="card-title">Thông tin liên hệ trực tiếp</h5>
          <ul class="list-unstyled">
            <li><strong>Địa chỉ:</strong> 123 Đường Kẹo Ngọt, Quận Bánh Quy, TP. Socola</li>
            <li><strong>Điện thoại:</strong> (012) 345-6789</li>
            <li><strong>Email:</strong> info@candyshop.com</li>
            <li><strong>Facebook:</strong> <a href="https://facebook.com/candyshop" target="_blank">facebook.com/candyshop</a></li>
            <li><strong>Zalo:</strong> 0123456789</li>
          </ul>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">Gửi tin nhắn cho chúng tôi</h5>
          <form id="contactForm">
            <div class="mb-3">
              <label for="contactName" class="form-label">Họ và tên</label>
              <input type="text" class="form-control" id="contactName" required>
            </div>
            <div class="mb-3">
              <label for="contactEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="contactEmail" required>
            </div>
            <div class="mb-3">
              <label for="contactSubject" class="form-label">Chủ đề</label>
              <input type="text" class="form-control" id="contactSubject">
            </div>
            <div class="mb-3">
              <label for="contactMessage" class="form-label">Nội dung tin nhắn</label>
              <textarea class="form-control" id="contactMessage" rows="5" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-100">Gửi tin nhắn</button>
          </form>
        </div>
      </div>

      <div class="mt-4 text-center">
        <h5>Bản đồ cửa hàng</h5>
        <div class="map-container">
          <!-- Placeholder for Google Maps or similar embed -->
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.4990700000003!2d106.69900000000001!3d10.776890000000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f3f3f3f3f3f%3A0x3f3f3f3f3f3f3f3f!2sBitexco%20Financial%20Tower!5e0!3m2!1sen!2s!4v1678901234567!5m2!1sen!2s" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const API_BASE_URL = 'http://localhost:8080/api';
  const contactForm = document.getElementById('contactForm');
  const loginLink = document.getElementById('login-link');
  const logoutBtn = document.getElementById('logout-btn');

  function showToast(message, type = 'success') {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = `toast-notification ${type}`;
    toast.innerText = message;

    container.appendChild(toast);

    setTimeout(() => {
      toast.classList.add('show');
    }, 100);

    setTimeout(() => {
      toast.classList.remove('show');
      toast.addEventListener('transitionend', () => {
        if (toast.parentNode) {
          toast.parentNode.removeChild(toast);
        }
      });
    }, 3000);
  }

  // Handle contact form submission (for now, just show a toast)
  contactForm.addEventListener('submit', (e) => {
    e.preventDefault();
    // In a real application, you would send this data to a backend API
    showToast('Cảm ơn bạn đã liên hệ! Chúng tôi sẽ phản hồi sớm nhất có thể.', 'success');
    contactForm.reset();
  });

  // Check login status and update nav links
  function checkLoginStatus() {
    const token = localStorage.getItem('accessToken');
    if (token) {
      loginLink.style.display = 'none';
      logoutBtn.style.display = 'block';
    } else {
      loginLink.style.display = 'block';
      logoutBtn.style.display = 'none';
    }
  }

  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem('accessToken');
    window.location.href = '/login';
  });

  document.addEventListener('DOMContentLoaded', checkLoginStatus);
</script>
</body>
</html>